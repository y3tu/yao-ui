{"remainingRequest":"/Users/yxy/work/y3tu/yao/yao-ui/src/main/webapp/node_modules/babel-loader/lib/index.js!/Users/yxy/work/y3tu/yao/yao-ui/src/main/webapp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yxy/work/y3tu/yao/yao-ui/src/main/webapp/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yxy/work/y3tu/yao/yao-ui/src/main/webapp/src/views/model/support/dataSourceConfig/Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yxy/work/y3tu/yao/yao-ui/src/main/webapp/src/views/model/support/dataSourceConfig/Edit.vue","mtime":1579573020635},{"path":"/Users/yxy/work/y3tu/yao/yao-ui/src/main/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1578533679077},{"path":"/Users/yxy/work/y3tu/yao/yao-ui/src/main/webapp/node_modules/babel-loader/lib/index.js","mtime":1578533613779},{"path":"/Users/yxy/work/y3tu/yao/yao-ui/src/main/webapp/node_modules/cache-loader/dist/cjs.js","mtime":1578533679077},{"path":"/Users/yxy/work/y3tu/yao/yao-ui/src/main/webapp/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1578533683571}],"contextDependencies":[],"result":["import _objectSpread from \"/Users/yxy/work/y3tu/yao/yao-ui/src/main/webapp/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'dataSourceConfigEdit',\n  props: {\n    dialogVisible: {\n      type: Boolean,\n      default: false\n    },\n    title: {\n      type: String,\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      dataSourceConfig: this.initDataSourceConfig(),\n      screenWidth: 0,\n      width: this.initWidth(),\n      buttonLoading: false,\n      rules: {\n        name: {\n          required: true,\n          message: this.$t('rules.require'),\n          trigger: 'blur'\n        },\n        type: {\n          required: true,\n          message: this.$t('rules.require'),\n          trigger: 'blur'\n        },\n        driverClass: {\n          required: true,\n          message: this.$t('rules.require'),\n          trigger: 'blur'\n        },\n        jdbcUrl: {\n          required: true,\n          message: this.$t('rules.require'),\n          trigger: 'blur'\n        },\n        username: {\n          required: true,\n          message: this.$t('rules.require'),\n          trigger: 'blur'\n        },\n        password: {\n          required: true,\n          message: this.$t('rules.require'),\n          trigger: 'blur'\n        }\n      }\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    window.onresize = function () {\n      return function () {\n        _this.width = _this.initWidth();\n      }();\n    };\n  },\n  computed: {\n    isVisible: {\n      get: function get() {\n        return this.dialogVisible;\n      },\n      set: function set() {\n        this.close();\n        this.reset();\n      }\n    }\n  },\n  methods: {\n    initDataSourceConfig: function initDataSourceConfig() {\n      return {\n        id: '',\n        name: '',\n        type: '',\n        driverClass: '',\n        jdbcUrl: '',\n        username: '',\n        password: ''\n      };\n    },\n    initWidth: function initWidth() {\n      this.screenWidth = document.body.clientWidth;\n\n      if (this.screenWidth < 991) {\n        return '90%';\n      } else if (this.screenWidth < 1400) {\n        return '45%';\n      } else {\n        return '800px';\n      }\n    },\n    setDataSourceConfig: function setDataSourceConfig(val) {\n      this.dataSourceConfig = _objectSpread({}, val);\n    },\n    close: function close() {\n      this.$emit('close');\n    },\n    reset: function reset() {\n      this.$refs.form.clearValidate();\n      this.$refs.form.resetFields();\n      this.dataSourceConfig = this.initDataSourceConfig();\n    },\n    submitForm: function submitForm() {\n      var _this2 = this;\n\n      this.$refs.form.validate(function (valid) {\n        if (valid) {\n          _this2.buttonLoading = true;\n\n          if (!_this2.dataSourceConfig.id) {\n            // create\n            _this2.$post('support/common/dataSourceConfig/create', _objectSpread({}, _this2.dataSourceConfig)).then(function () {\n              _this2.buttonLoading = false;\n              _this2.isVisible = false;\n\n              _this2.$message({\n                message: _this2.$t('tips.createSuccess'),\n                type: 'success'\n              });\n\n              _this2.$emit('success');\n            }).catch(function () {\n              _this2.buttonLoading = false;\n            });\n          } else {\n            // update\n            _this2.dataSourceConfig.createTime = _this2.dataSourceConfig.modifyTime = null;\n\n            _this2.$put('support/common/dataSourceConfig/update', _objectSpread({}, _this2.dataSourceConfig)).then(function () {\n              _this2.buttonLoading = false;\n              _this2.isVisible = false;\n\n              _this2.$message({\n                message: _this2.$t('tips.updateSuccess'),\n                type: 'success'\n              });\n\n              _this2.$emit('success');\n            }).catch(function () {\n              _this2.buttonLoading = false;\n            });\n          }\n        } else {\n          return false;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["Edit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <el-dialog\n            :title=\"title\"\n            :width=\"width\"\n            top=\"50px\"\n            :close-on-click-modal=\"false\"\n            :close-on-press-escape=\"false\"\n            :visible.sync=\"isVisible\">\n        <el-form ref=\"form\" :model=\"dataSourceConfig\" :rules=\"rules\" label-position=\"right\" label-width=\"120px\">\n            <el-form-item label=\"数据源名称\" prop=\"name\">\n                <el-input v-model=\"dataSourceConfig.name\"/>\n            </el-form-item>\n            <el-form-item label=\"数据源类型\" prop=\"type\">\n                <el-input v-model=\"dataSourceConfig.type\"/>\n            </el-form-item>\n            <el-form-item label=\"驱动\" prop=\"driverClass\">\n                <el-input v-model=\"dataSourceConfig.driverClass\"/>\n            </el-form-item>\n            <el-form-item label=\"数据源连接Url\" prop=\"jdbcUrl\">\n                <el-input v-model=\"dataSourceConfig.jdbcUrl\" />\n            </el-form-item>\n            <el-form-item label=\"登录用户名\" prop=\"username\">\n                <el-input v-model=\"dataSourceConfig.username\"/>\n            </el-form-item>\n            <el-form-item label=\"登录密码\" prop=\"password\">\n                <el-input v-model=\"dataSourceConfig.password\"/>\n            </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button type=\"warning\" plain :loading=\"buttonLoading\" @click=\"isVisible = false\">\n                {{ $t('common.cancel') }}\n            </el-button>\n            <el-button type=\"primary\" plain :loading=\"buttonLoading\" @click=\"submitForm\">\n                {{ $t('common.confirm') }}\n            </el-button>\n        </div>\n    </el-dialog>\n</template>\n\n<script>\n    export default {\n        name:'dataSourceConfigEdit',\n        props: {\n            dialogVisible: {\n                type: Boolean,\n                default: false\n            },\n            title: {\n                type: String,\n                default: ''\n            }\n        },\n        data(){\n            return{\n                dataSourceConfig:this.initDataSourceConfig(),\n                screenWidth: 0,\n                width: this.initWidth(),\n                buttonLoading:false,\n                rules:{\n                    name:{required: true, message: this.$t('rules.require'), trigger: 'blur'},\n                    type:{required: true, message: this.$t('rules.require'), trigger: 'blur'},\n                    driverClass:{required: true, message: this.$t('rules.require'), trigger: 'blur'},\n                    jdbcUrl:{required: true, message: this.$t('rules.require'), trigger: 'blur'},\n                    username:{required: true, message: this.$t('rules.require'), trigger: 'blur'},\n                    password:{required: true, message: this.$t('rules.require'), trigger: 'blur'}\n                },\n\n            }\n        },\n        mounted() {\n            window.onresize = () => {\n                return (() => {\n                    this.width = this.initWidth()\n                })()\n            }\n        },\n        computed: {\n            isVisible: {\n                get() {\n                    return this.dialogVisible\n                },\n                set() {\n                    this.close();\n                    this.reset()\n                }\n            }\n        },\n        methods: {\n            initDataSourceConfig(){\n                return {\n                    id: '',\n                    name: '',\n                    type:'',\n                    driverClass: '',\n                    jdbcUrl: '',\n                    username: '',\n                    password: ''\n                }\n            },\n            initWidth() {\n                this.screenWidth = document.body.clientWidth;\n                if (this.screenWidth < 991) {\n                    return '90%'\n                } else if (this.screenWidth < 1400) {\n                    return '45%'\n                } else {\n                    return '800px'\n                }\n            },\n            setDataSourceConfig(val) {\n                this.dataSourceConfig = {...val}\n            },\n            close() {\n                this.$emit('close')\n            },\n            reset() {\n                this.$refs.form.clearValidate();\n                this.$refs.form.resetFields();\n                this.dataSourceConfig=this.initDataSourceConfig();\n            },\n            submitForm(){\n                this.$refs.form.validate((valid) => {\n                    if (valid) {\n                        this.buttonLoading = true;\n                        if (!this.dataSourceConfig.id) {\n                            // create\n                            this.$post('support/common/dataSourceConfig/create', {...this.dataSourceConfig}).then(() => {\n                                this.buttonLoading = false;\n                                this.isVisible = false;\n                                this.$message({\n                                    message: this.$t('tips.createSuccess'),\n                                    type: 'success'\n                                });\n                                this.$emit('success')\n                            }).catch(() => {\n                                this.buttonLoading = false;\n                            });\n                        }else {\n                            // update\n                            this.dataSourceConfig.createTime = this.dataSourceConfig.modifyTime  = null;\n                            this.$put('support/common/dataSourceConfig/update', {...this.dataSourceConfig}).then(() => {\n                                this.buttonLoading = false;\n                                this.isVisible = false;\n                                this.$message({\n                                    message: this.$t('tips.updateSuccess'),\n                                    type: 'success'\n                                });\n                                this.$emit('success')\n                            }).catch(() => {\n                                this.buttonLoading = false;\n                            });\n                        }\n                    }else {\n                        return false;\n                    }\n                })\n            }\n        }\n    }\n</script>\n\n<style>\n\n</style>"],"sourceRoot":"src/views/model/support/dataSourceConfig"}]}