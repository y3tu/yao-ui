(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74974f2c","chunk-6425d6a4"],{"172b":function(e,o,c){},2838:function(e,o,c){"use strict";var i=c("e372"),t=c.n(i);t.a},"481f":function(e,o,c){"use strict";c.r(o);var i=function(){var e=this,o=e.$createElement,c=e._self._c||o;return c("el-dialog",{attrs:{title:e.$t("table.menu.icon"),width:e.width,top:"50px","close-on-click-modal":!1,"close-on-press-escape":!1,visible:e.isVisible},on:{"update:visible":function(o){e.isVisible=o}}},[c("el-tabs",{staticStyle:{"margin-top":"-1rem"},model:{value:e.activeName,callback:function(o){e.activeName=o},expression:"activeName"}},[c("el-tab-pane",{attrs:{label:e.$t("common.tab.common"),name:"first"}},[c("ul",e._l(e.icons.commonIcons,(function(o){return c("li",{key:o},[c("span",{class:{active:e.activeIndex===o}},[c("el-icon",{class:o,attrs:{title:o},nativeOn:{click:function(c){return e.chooseIcon(o)}}})],1)])})),0)]),e._v(" "),c("el-tab-pane",{attrs:{label:e.$t("common.tab.directivity"),name:"second"}},[c("ul",e._l(e.icons.directivityIcons,(function(o){return c("li",{key:o},[c("span",{class:{active:e.activeIndex===o}},[c("el-icon",{class:o,attrs:{title:o},nativeOn:{click:function(c){return e.chooseIcon(o)}}})],1)])})),0)]),e._v(" "),c("el-tab-pane",{attrs:{label:e.$t("common.tab.solid"),name:"third"}},[c("ul",e._l(e.icons.solidIcons,(function(o){return c("li",{key:o},[c("span",{class:{active:e.activeIndex===o}},[c("el-icon",{class:o,attrs:{title:o},nativeOn:{click:function(c){return e.chooseIcon(o)}}})],1)])})),0)]),e._v(" "),c("el-tab-pane",{attrs:{label:e.$t("common.tab.food"),name:"fourth"}},[c("ul",e._l(e.icons.foodIcons,(function(o){return c("li",{key:o},[c("span",{class:{active:e.activeIndex===o}},[c("el-icon",{class:o,attrs:{title:o},nativeOn:{click:function(c){return e.chooseIcon(o)}}})],1)])})),0)])],1),e._v(" "),c("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[c("el-button",{attrs:{type:"warning",plain:""},on:{click:function(o){e.isVisible=!1}}},[e._v("\n      "+e._s(e.$t("common.cancel"))+"\n    ")]),e._v(" "),c("el-button",{attrs:{type:"primary",plain:""},on:{click:e.confirm}},[e._v("\n      "+e._s(e.$t("common.confirm"))+"\n    ")])],1)],1)},t=[],n=["el-icon-eleme","el-icon-delete","el-icon-setting","el-icon-user","el-icon-phone-outline","el-icon-more-outline","el-icon-star-off","el-icon-goods","el-icon-warning-outline","el-icon-zoom-in","el-icon-zoom-out","el-icon-remove-outline","el-icon-circle-plus-outline","el-icon-circle-check","el-icon-circle-close","el-icon-help","el-icon-minus","el-icon-plus","el-icon-check","el-icon-close","el-icon-picture-outline","el-icon-picture-outline-round","el-icon-upload2","el-icon-download","el-icon-camera","el-icon-video-camera","el-icon-bell","el-icon-video-pause","el-icon-video-play","el-icon-refresh","el-icon-refresh-right","el-icon-refresh-left","el-icon-finished","el-icon-loading","el-icon-view","el-icon-c-scale-to-original","el-icon-date","el-icon-edit","el-icon-edit-outline","el-icon-folder","el-icon-folder-opened","el-icon-folder-add","el-icon-folder-remove","el-icon-folder-delete","el-icon-folder-checked","el-icon-tickets","el-icon-document-remove","el-icon-document-delete","el-icon-document-copy","el-icon-document-checked","el-icon-document","el-icon-document-add","el-icon-printer","el-icon-paperclip","el-icon-takeaway-box","el-icon-search","el-icon-monitor","el-icon-attract","el-icon-mobile","el-icon-scissors","el-icon-umbrella","el-icon-headset","el-icon-brush","el-icon-mouse","el-icon-coordinate","el-icon-magic-stick","el-icon-reading","el-icon-data-line","el-icon-data-board","el-icon-pie-chart","el-icon-data-analysis","el-icon-collection-tag","el-icon-film","el-icon-suitcase","el-icon-suitcase-1","el-icon-receiving","el-icon-collection","el-icon-files","el-icon-notebook-1","el-icon-notebook-2","el-icon-toilet-paper","el-icon-office-building","el-icon-school","el-icon-table-lamp","el-icon-house","el-icon-no-smoking","el-icon-smoking","el-icon-shopping-cart-full","el-icon-shopping-cart-1","el-icon-shopping-cart-2","el-icon-shopping-bag-1","el-icon-shopping-bag-2","el-icon-sold-out","el-icon-sell","el-icon-present","el-icon-box","el-icon-bank-card","el-icon-money","el-icon-coin","el-icon-wallet","el-icon-discount","el-icon-price-tag","el-icon-news","el-icon-guide","el-icon-male","el-icon-female","el-icon-thumb","el-icon-cpu","el-icon-link","el-icon-connection","el-icon-open","el-icon-turn-off","el-icon-set-up","el-icon-chat-round","el-icon-chat-line-round","el-icon-chat-square","el-icon-chat-dot-round","el-icon-chat-dot-square","el-icon-chat-line-square","el-icon-message","el-icon-postcard","el-icon-position","el-icon-turn-off-microphone","el-icon-microphone","el-icon-close-notification","el-icon-bangzhu","el-icon-time","el-icon-odometer","el-icon-crop","el-icon-aim","el-icon-switch-button","el-icon-full-screen","el-icon-copy-document","el-icon-mic","el-icon-stopwatch","el-icon-medal-1","el-icon-medal","el-icon-trophy","el-icon-trophy-1","el-icon-first-aid-kit","el-icon-discover","el-icon-place","el-icon-location-outline","el-icon-location-information","el-icon-add-location","el-icon-delete-location","el-icon-map-location","el-icon-alarm-clock","el-icon-timer","el-icon-watch-1","el-icon-watch","el-icon-lock","el-icon-unlock","el-icon-key","el-icon-service","el-icon-mobile-phone","el-icon-bicycle","el-icon-truck","el-icon-ship","el-icon-basketball","el-icon-football","el-icon-soccer","el-icon-baseball"],r=["el-icon-d-caret","el-icon-caret-left","el-icon-caret-right","el-icon-caret-bottom","el-icon-caret-top","el-icon-bottom-left","el-icon-bottom-right","el-icon-back","el-icon-right","el-icon-bottom","el-icon-top","el-icon-top-left","el-icon-top-right","el-icon-arrow-left","el-icon-arrow-right","el-icon-arrow-down","el-icon-arrow-up","el-icon-d-arrow-left","el-icon-d-arrow-right","el-icon-sort","el-icon-sort-up","el-icon-sort-down","el-icon-rank"],s=["el-icon-question","el-icon-info","el-icon-remove","el-icon-circle-plus","el-icon-success","el-icon-error","el-icon-platform-eleme","el-icon-delete-solid","el-icon-s-tools","el-icon-user-solid","el-icon-phone","el-icon-star-on","el-icon-s-goods","el-icon-warning","el-icon-s-help","el-icon-picture","el-icon-upload","el-icon-camera-solid","el-icon-video-camera-solid","el-icon-message-solid","el-icon-s-cooperation","el-icon-s-order","el-icon-s-platform","el-icon-s-fold","el-icon-s-unfold","el-icon-s-operation","el-icon-s-promotion","el-icon-s-home","el-icon-s-release","el-icon-s-ticket","el-icon-s-management","el-icon-s-open","el-icon-s-shop","el-icon-s-marketing","el-icon-s-flag","el-icon-s-comment","el-icon-s-finance","el-icon-s-claim","el-icon-s-custom","el-icon-s-opportunity","el-icon-s-data","el-icon-s-check","el-icon-s-grid","el-icon-menu","el-icon-share","el-icon-d-caret","el-icon-caret-left","el-icon-caret-right","el-icon-caret-bottom","el-icon-caret-top","el-icon-location"],l=["el-icon-dish","el-icon-dish-1","el-icon-food","el-icon-chicken","el-icon-fork-spoon","el-icon-knife-fork","el-icon-burger","el-icon-tableware","el-icon-sugar","el-icon-dessert","el-icon-ice-cream","el-icon-hot-water","el-icon-water-cup","el-icon-coffee-cup","el-icon-cold-drink","el-icon-goblet","el-icon-goblet-full","el-icon-goblet-square","el-icon-goblet-square-full","el-icon-refrigerator","el-icon-grape","el-icon-watermelon","el-icon-cherry","el-icon-apple","el-icon-pear","el-icon-orange","el-icon-coffee","el-icon-ice-tea","el-icon-ice-drink","el-icon-milk-tea","el-icon-potato-strips","el-icon-lollipop","el-icon-ice-cream-square","el-icon-ice-cream-round"],a={name:"Icons",props:{dialogVisible:{type:Boolean,default:!1}},data:function(){return{icons:{commonIcons:n,directivityIcons:r,solidIcons:s,foodIcons:l},activeIndex:"",choosedIcon:"",activeName:"first",screenWidth:0,width:this.initWidth()}},computed:{isVisible:{get:function(){return this.dialogVisible},set:function(){this.close()}}},mounted:function(){var e=this;window.onresize=function(){return function(){e.width=e.initWidth()}()}},methods:{initWidth:function(){return this.screenWidth=document.body.clientWidth,this.screenWidth<991?"90%":this.screenWidth<1400?"60%":"800px"},close:function(){this.$emit("close"),this.activeName="first",this.choosedIcon=this.activeIndex=""},chooseIcon:function(e){this.activeIndex=e,this.choosedIcon=e,this.$message({message:this.$t("tips.choose")+e,type:"success"})},confirm:function(){this.choosedIcon?(this.$emit("choose",this.choosedIcon),this.activeName="first",this.choosedIcon=this.activeIndex=""):this.$message({message:this.$t("tips.chooseNothing"),type:"warning"})}}},u=a,m=(c("2838"),c("0c7c")),d=Object(m["a"])(u,i,t,!1,null,"49238a72",null);o["default"]=d.exports},"7d73":function(e,o,c){"use strict";c.r(o);var i=function(){var e=this,o=e.$createElement,c=e._self._c||o;return c("div",{staticClass:"resource"},[c("el-row",{attrs:{gutter:10}},[c("el-col",{attrs:{xs:24,sm:12}},[c("div",{staticClass:"app-container"},[c("div",{staticClass:"filter-container"},[c("el-input",{staticClass:"filter-item search-item",attrs:{placeholder:e.$t("table.resource.resourceName")},model:{value:e.resourceName,callback:function(o){e.resourceName=o},expression:"resourceName"}}),e._v(" "),c("el-button",{staticClass:"filter-item",attrs:{type:"primary",plain:""},on:{click:e.search}},[e._v("\n                        "+e._s(e.$t("table.search"))+"\n                    ")]),e._v(" "),c("el-button",{staticClass:"filter-item",attrs:{type:"warning",plain:""},on:{click:e.reset}},[e._v("\n                        "+e._s(e.$t("table.reset"))+"\n                    ")]),e._v(" "),c("el-dropdown",{directives:[{name:"has-any-permission",rawName:"v-has-any-permission",value:["resource:create","resource:delete","resource:export"],expression:"['resource:create','resource:delete','resource:export']"}],staticClass:"filter-item",attrs:{trigger:"click"}},[c("el-button",[e._v("\n                            "+e._s(e.$t("table.more"))),c("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),c("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[c("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["resource:create"],expression:"['resource:create']"}],nativeOn:{click:function(o){return e.add(o)}}},[e._v(e._s(e.$t("table.add")))]),e._v(" "),c("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["resource:delete"],expression:"['resource:delete']"}],nativeOn:{click:function(o){return e.deleteResource(o)}}},[e._v(e._s(e.$t("table.delete")))]),e._v(" "),c("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["resource:export"],expression:"['resource:export']"}],nativeOn:{click:function(o){return e.exportExcel(o)}}},[e._v(e._s(e.$t("table.export")))])],1)],1)],1),e._v(" "),c("el-tree",{ref:"resourceTree",attrs:{props:e.treeProps,data:e.resourceTree,"check-strictly":!0,"show-checkbox":"",accordion:"","node-key":"id","highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.nodeClick}})],1)]),e._v(" "),c("el-col",{attrs:{xs:24,sm:12}},[c("el-card",{staticClass:"box-card"},[c("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[c("span",[e._v(e._s(""===e.resource.resourceId?this.$t("common.add"):this.$t("common.edit")))])]),e._v(" "),c("div",[c("el-form",{ref:"form",attrs:{model:e.resource,rules:e.rules,"label-position":"right","label-width":"100px"}},[c("el-form-item",{attrs:{label:e.$t("table.resource.parentId"),prop:"parentId"}},[c("treeselect",{staticStyle:{width:"100%"},attrs:{normalizer:e.treeSelectNormalizer,multiple:!1,options:e.resourceTree,"clear-value-text":e.$t("common.clear"),placeholder:" "},model:{value:e.resource.parentId,callback:function(o){e.$set(e.resource,"parentId",o)},expression:"resource.parentId"}})],1),e._v(" "),c("el-form-item",{attrs:{label:e.$t("table.resource.resourceName"),prop:"resourceName"}},[c("el-input",{model:{value:e.resource.resourceName,callback:function(o){e.$set(e.resource,"resourceName",o)},expression:"resource.resourceName"}})],1),e._v(" "),c("el-form-item",{attrs:{label:e.$t("table.resource.type"),prop:"type"}},[c("el-radio-group",{attrs:{disabled:""!==e.resource.resourceId},model:{value:e.resource.type,callback:function(o){e.$set(e.resource,"type",o)},expression:"resource.type"}},[c("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("common.resource.menu")))]),e._v(" "),c("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("common.resource.button")))])],1)],1),e._v(" "),c("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.resource.type,expression:"resource.type === 0"}],attrs:{label:e.$t("table.resource.icon"),prop:"icon"}},[c("el-input",{model:{value:e.resource.icon,callback:function(o){e.$set(e.resource,"icon",o)},expression:"resource.icon"}},[c("el-button",{staticStyle:{"padding-left":"0"},attrs:{slot:"append",icon:"el-icon-brush"},on:{click:e.chooseIcons},slot:"append"})],1)],1),e._v(" "),c("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.resource.type,expression:"resource.type === 0 "}],attrs:{label:e.$t("table.resource.path"),prop:"path"}},[c("el-input",{model:{value:e.resource.path,callback:function(o){e.$set(e.resource,"path",o)},expression:"resource.path"}})],1),e._v(" "),c("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.resource.type,expression:"resource.type === 0"}],attrs:{label:e.$t("table.resource.component"),prop:"component"}},[c("el-input",{model:{value:e.resource.component,callback:function(o){e.$set(e.resource,"component",o)},expression:"resource.component"}})],1),e._v(" "),c("el-form-item",{attrs:{label:e.$t("table.resource.permission"),prop:"permission"}},[c("el-input",{model:{value:e.resource.permission,callback:function(o){e.$set(e.resource,"permission",o)},expression:"resource.permission"}})],1),e._v(" "),c("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.resource.type,expression:"resource.type === 0"}],attrs:{label:e.$t("table.resource.orderNum"),prop:"orderNum"}},[c("el-input-number",{attrs:{min:0,max:100},on:{change:e.handleNumChange},model:{value:e.resource.orderNum,callback:function(o){e.$set(e.resource,"orderNum",o)},expression:"resource.orderNum"}})],1)],1)],1)]),e._v(" "),c("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"-2rem"}},[c("el-row",[c("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[c("el-button",{attrs:{type:"primary",plain:"",loading:e.buttonLoading},on:{click:e.submit}},[e._v(e._s(""===e.resource.resourceId?this.$t("common.add"):this.$t("common.edit"))+"\n                        ")])],1)],1)],1)],1)],1),e._v(" "),c("Icons",{attrs:{"dialog-visible":e.iconVisible},on:{close:function(o){e.iconVisible=!1},choose:e.chooseIcon}})],1)},t=[],n=(c("1c01"),c("58b2"),c("8e6e"),c("f3e2"),c("ac6a"),c("456d"),c("d25f"),c("bd86")),r=(c("57e7"),c("7f7f"),c("481f")),s=c("7026"),l=c.n(s);c("542c");function a(e,o){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);o&&(i=i.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),c.push.apply(c,i)}return c}function u(e){for(var o=1;o<arguments.length;o++){var c=null!=arguments[o]?arguments[o]:{};o%2?a(Object(c),!0).forEach((function(o){Object(n["a"])(e,o,c[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):a(Object(c)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(c,o))}))}return e}var m={name:"resourceManage",components:{Icons:r["default"],Treeselect:l.a},data:function(){return{iconVisible:!1,buttonLoading:!1,selection:[],resourceTree:[],resourceName:"",resource:this.initResource(),treeProps:{label:"name",children:"children"},treeSelectNormalizer:function(e){return(null==e.children||e.children.length<1)&&delete e.children,{label:e.name}},rules:{resourceName:[{required:!0,message:this.$t("rules.require"),trigger:"blur"},{min:2,max:10,message:this.$t("rules.range2to10"),trigger:"blur"}],path:{max:100,message:this.$t("rules.noMoreThan100"),trigger:"blur"},component:{max:100,message:this.$t("rules.noMoreThan100"),trigger:"blur"},permission:{max:50,message:this.$t("rules.noMoreThan50"),trigger:"blur"}}}},mounted:function(){this.initResourceTree()},methods:{initResourceTree:function(){var e=this;this.$get("upms/resource/getResourceTree").then((function(o){e.resourceTree=o.data}))},initResource:function(){return{resourceId:"",resourceName:"",parentId:null,path:"",component:"",permission:"",type:0,orderNum:0,icon:""}},exportExcel:function(){this.$download("upms/resource/excel",{resourceName:this.resourceName},"resource_".concat((new Date).getTime(),".xlsx"))},filterNode:function(e,o){return!e||-1!==o.name.indexOf(e)},nodeClick:function(e,o,c){this.resource.parentId=e.parentId,"-1"===this.resource.parentId&&(this.resource.parentId=null),e=e.data,this.resource.orderNum=e.orderNum,this.resource.type=e.type,this.resource.permission=e.permission,this.resource.path=e.path,this.resource.component=e.component,this.resource.icon=e.icon,this.resource.resourceName=e.resourceName,this.resource.resourceId=e.resourceId,this.$refs.form.clearValidate()},handleNumChange:function(e){this.resource.orderNum=e},chooseIcons:function(){this.iconVisible=!0},chooseIcon:function(e){this.resource.icon=e,this.iconVisible=!1},submit:function(){var e=this;this.$refs.form.validate((function(o){if(!o)return!1;e.buttonLoading=!0,e.resource.createTime=e.resource.modifyTime=null,e.resource.resourceId?e.$put("upms/resource/update",u({},e.resource)).then((function(){e.buttonLoading=!1,e.$message({message:e.$t("tips.updateSuccess"),type:"success"}),e.reset()})).catch((function(){e.buttonLoading=!1})):e.$post("upms/resource/create",u({},e.resource)).then((function(){e.buttonLoading=!1,e.$message({message:e.$t("tips.createSuccess"),type:"success"}),e.reset()})).catch((function(){e.buttonLoading=!1}))}))},reset:function(){this.initResourceTree(),this.resourceName="",this.resetForm()},search:function(){this.$refs.resourceTree.filter(this.resourceName)},add:function(){this.resetForm()},deleteResource:function(){var e=this,o=this.$refs.resourceTree.getCheckedKeys();0===o.length?this.$message({message:this.$t("tips.noNodeSelected"),type:"warning"}):this.$confirm(this.$t("tips.confirmDeleteNode"),this.$t("common.tips"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then((function(){e.resource.resourceIds=o.join(","),e.$delete("upms/resource/delete/".concat(e.resource.resourceIds)).then((function(){e.$message({message:e.$t("tips.deleteSuccess"),type:"success"}),e.reset()}))})).catch((function(){e.$refs.resourceTree.setCheckedKeys([])}))},resetForm:function(){this.$refs.form.clearValidate(),this.$refs.form.resetFields(),this.resource=this.initResource()}}},d=m,p=(c("f489"),c("0c7c")),h=Object(p["a"])(d,i,t,!1,null,"736d470a",null);o["default"]=h.exports},e372:function(e,o,c){},f489:function(e,o,c){"use strict";var i=c("172b"),t=c.n(i);t.a}}]);