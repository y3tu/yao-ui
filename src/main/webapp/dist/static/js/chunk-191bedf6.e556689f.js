(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-191bedf6","chunk-2dfa720a","chunk-b2893a06"],{"48e8":function(e,t,a){"use strict";var n=a("91cb"),i=a.n(n);i.a},"693d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.to}},[e._v("字段设置")]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialog,title:"代码生成配置","append-to-body":"",width:"60%"},on:{"update:visible":function(t){e.dialog=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,size:"small"}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"字段名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"字段类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"comment",label:"字段标题","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"left"}},[a("p",[e._v(e._s(e.data[t.$index].comment))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-input",{staticClass:"edit-input",model:{value:e.data[t.$index].comment,callback:function(a){e.$set(e.data[t.$index],"comment",a)},expression:"data[scope.$index].comment"}})],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"查询方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticClass:"edit-input",attrs:{clearable:"",placeholder:"请选择"},model:{value:e.data[t.$index].columnQuery,callback:function(a){e.$set(e.data[t.$index],"columnQuery",a)},expression:"data[scope.$index].columnQuery"}},[a("el-option",{attrs:{label:"模糊查询",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"精确查询",value:"2"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"columnShow",label:"列表显示"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"true"===t.row.columnShow?"显示":"不显示",placement:"top"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"true","inactive-value":"false"},model:{value:e.data[t.$index].columnShow,callback:function(a){e.$set(e.data[t.$index],"columnShow",a)},expression:"data[scope.$index].columnShow"}})],1)]}}])})],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{loading:e.genLoading,type:"primary"},on:{click:e.doSubmit}},[e._v("生成")])],1)],1)],1)},i=[],o=(a("7f7f"),a("e272")),r={name:"generatorColumn",props:{name:{type:String,required:!0}},data:function(){return{dialog:!1,loading:!1,genLoading:!1,data:[]}},methods:{to:function(){var e=this;this.dialog=!0,this.time=130,this.$nextTick((function(){e.initData()}))},initData:function(){var e=this;e.data=[],Object(o["d"])(this.name).then((function(t){var a=t.data;for(var n in a)e.data.push(a[n])}))},cancel:function(){this.dialog=!1},doSubmit:function(){var e=this;this.genLoading=!0,Object(o["a"])(this.data,this.name).then((function(t){e.$notify({title:"生成成功",type:"success",duration:2500}),e.dialog=!1,e.genLoading=!1})).catch((function(t){e.dialog=!1,e.genLoading=!1,console.log(t.response.data.message)}))}}},c=r,l=(a("48e8"),a("0c7c")),s=Object(l["a"])(c,n,i,!1,null,null,null);t["default"]=s.exports},"91cb":function(e,t,a){},b8ec:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.dialog,title:"生成器配置","append-to-body":"",width:"550px"},on:{"update:visible":function(t){e.dialog=t}}},[a("el-form",{ref:"form",attrs:{model:e.config,rules:e.rules,size:"small","label-width":"90px"}},[a("el-form-item",{attrs:{label:"作者名称",prop:"author"}},[a("el-input",{staticStyle:{width:"420px"},model:{value:e.config.author,callback:function(t){e.$set(e.config,"author",t)},expression:"config.author"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"包路径",prop:"pack"}},[a("el-input",{staticStyle:{width:"420px"},model:{value:e.config.pack,callback:function(t){e.$set(e.config,"pack",t)},expression:"config.pack"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模块名称",prop:"moduleName"}},[a("el-input",{staticStyle:{width:"420px"},model:{value:e.config.moduleName,callback:function(t){e.$set(e.config,"moduleName",t)},expression:"config.moduleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"表前缀",prop:"path"}},[a("el-input",{staticStyle:{width:"420px"},model:{value:e.config.prefix,callback:function(t){e.$set(e.config,"prefix",t)},expression:"config.prefix"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"请求前缀",prop:"path"}},[a("el-input",{staticStyle:{width:"420px"},model:{value:e.config.apiPrefix,callback:function(t){e.$set(e.config,"apiPrefix",t)},expression:"config.apiPrefix"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.doSubmit}},[e._v("确认")])],1)],1)},i=[],o=a("e272"),r={data:function(){return{loading:!1,dialog:!1,config:{author:"",pack:"",moduleName:"",prefix:"",apiPrefix:""},rules:{author:[{required:!0,message:"作者不能为空",trigger:"blur"}],pack:[{required:!0,message:"包路径不能为空",trigger:"blur"}],moduleName:[{required:!0,message:"模块名称",trigger:"blur"}]}}},methods:{cancel:function(){this.resetForm()},doSubmit:function(){var e=this;this.$refs["form"].validate((function(t){if(!t)return!1;e.loading=!0,e.doUpdate()}))},doUpdate:function(){var e=this;Object(o["f"])(this.config).then((function(t){e.resetForm(),e.$notify({title:"更新成功",type:"success",duration:2500}),e.loading=!1})).catch((function(t){e.loading=!1,console.log(t)}))},resetForm:function(){this.dialog=!1,this.$refs["form"].resetFields(),this.config={author:"",pack:"",path:"",moduleName:"",cover:"false",apiPath:""}}}},c=r,l=a("0c7c"),s=Object(l["a"])(c,n,i,!1,null,null,null);t["default"]=s.exports},c6e7:function(e,t,a){"use strict";a("456d"),a("ac6a"),a("f3e2"),a("96cf");var n=a("3b8d");t["a"]={data:function(){return{pageUrl:"",pageLoading:!1,page:{records:[],total:0,current:1,size:10,orders:[],entity:{},params:{}},time:100}},methods:{findPage:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,t.findPageInit();case 3:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("return",new Promise((function(e,a){t.pageLoading=!0,Object.keys(t.page.entity).forEach((function(e){null!=t.page.entity[e]&&""!==t.page.entity[e]||delete t.page.entity[e]})),Object.keys(t.page.params).forEach((function(e){null!=t.page.params[e]&&""!==t.page.params[e]||delete t.page.params[e]})),t.page.records=[],t.$page(t.pageUrl,t.page).then((function(a){t.page=a.data,setTimeout((function(){t.pageLoading=!1}),t.time),e(a)})).catch((function(e){t.pageLoading=!1,a(e)}))})));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),findPageInit:function(){return!0},pageChange:function(e){this.page.current=e,this.findPage()},sizeChange:function(e){this.page.current=0,this.page.size=e,this.findPage()},sortChange:function(e){var t=e.prop,a=e.order;this.page.orders=[],this.page.orders=[{column:t,asc:"ascending"===a}],this.findPage()},resetPage:function(){this.page.entity={},this.page.params={},this.page.orders=[]}}}},e272:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"f",(function(){return l})),a.d(t,"a",(function(){return s}));var n=a("b775");function i(e){return n["a"].get("support/common/generator/getTables",e)}function o(e){return Object(n["a"])({url:"back/generator/getTable/".concat(e),method:"get"})}function r(){return n["a"].get("support/common/generator/getGeneratorConfig")}function c(){return n["a"].get("support/common/dataSourceConfig/getAll")}function l(e){return n["a"].put("support/common/generator/updateGeneratorConfig",e)}function s(e,t){return Object(n["a"])({url:"back/generator/build?tableName="+t,data:e,method:"post",responseType:"blob"}).then((function(e){var a=new Blob([e],{type:"application/zip"}),n=t+".zip";if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(a,n);else{var i=window.URL.createObjectURL(a),o=document.createElement("a");o.style.display="none",o.href=i,o.setAttribute("download",n),document.body.appendChild(o),o.click()}}))}},f06d:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-autocomplete",{staticClass:"filter-item search-item",attrs:{clearable:"","fetch-suggestions":e.queryDataSourceConfig,placeholder:"请选择数据源"},on:{select:e.handleSelect},model:{value:e.dataSourceConfig,callback:function(t){e.dataSourceConfig=t},expression:"dataSourceConfig"}}),e._v(" "),a("el-input",{staticClass:"filter-item search-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入表名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.tableName,callback:function(t){e.tableName=t},expression:"tableName"}}),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"warning",icon:"el-icon-setting"},on:{click:e.toConfig}},[e._v("生成器配置")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"name",label:"表名"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"remarks",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("Column",{attrs:{name:e.row.name}})]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"8px"},attrs:{total:e.total,layout:"total, prev, pager, next, sizes","current-page":e.currentPage,"page-size":e.pageSize},on:{"size-change":e.sizeChange,"current-change":e.pageChange}}),e._v(" "),a("Config",{ref:"config"})],1)},i=[],o=(a("57e7"),a("ac6a"),a("f3e2"),a("96cf"),a("3b8d")),r=(a("386d"),a("7f7f"),a("6762"),a("2fdb"),a("d25f"),a("c6e7")),c=a("e272"),l=a("5c96"),s=a("b8ec"),u=a("693d"),d={name:"generatorMgr",mixins:[r["a"]],components:{Config:s["default"],Column:u["default"]},data:function(){return{tableName:"",tableData:[],pageLoading:!1,currentPage:1,total:20,pageSize:10,dataSourceConfig:"",dataSourceConfigId:""}},created:function(){var e=this;this.$nextTick((function(){e.init()}))},methods:{init:function(){},search:function(){var e=this;this.$isEmpty(this.dataSourceConfigId)?Object(l["Message"])({message:"请选择数据源",type:"warning",duration:5e3}):(this.pageLoading=!0,Object(c["e"])({dataSourceConfigId:this.dataSourceConfigId}).then((function(t){e.tableData=t.data;var a=e.tableData.filter((function(t,a){return t.name.includes(e.tableName)}));e.list=a.filter((function(t,a){return a<e.currentPage*e.pageSize&&a>=e.pageSize*(e.currentPage-1)})),e.total=a.length,e.tableData=e.list,e.pageLoading=!1})).catch((function(t){e.pageLoading=!1})))},toConfig:function(){var e=this.$refs.config;Object(c["c"])().then((function(t){e.config=t.data,e.config.cover=e.config.cover})),e.dialog=!0},sizeChange:function(e){this.currentPage=1,this.pageSize=e,this.search()},pageChange:function(e){this.currentPage=e,this.search()},queryDataSourceConfig:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,a){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["b"])().then((function(e){var i=e.data;i.forEach((function(e){e.value=e.name}));var o=i?i.filter(n.createFilter(t)):i;clearTimeout(n.timeout),n.timeout=setTimeout((function(){a(o)}),1e3*Math.random())}));case 2:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}(),createFilter:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.dataSourceConfigId=e.id}}},f=d,p=a("0c7c"),g=Object(p["a"])(f,n,i,!1,null,null,null);t["default"]=g.exports}}]);