(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-959f3512"],{"53e7":function(e,t,r){},5803:function(e,t,r){"use strict";var n=r("53e7"),a=r.n(n);a.a},"65e8":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Department"},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{xs:24,sm:12}},[r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-input",{staticClass:"filter-item search-item",attrs:{placeholder:e.$t("table.department.departmentName")},model:{value:e.departmentName,callback:function(t){e.departmentName=t},expression:"departmentName"}}),e._v(" "),r("el-button",{staticClass:"filter-item",attrs:{type:"primary",plain:""},on:{click:e.search}},[e._v("\n                        "+e._s(e.$t("table.search"))+"\n                    ")]),e._v(" "),r("el-button",{staticClass:"filter-item",attrs:{type:"warning",plain:""},on:{click:e.reset}},[e._v("\n                        "+e._s(e.$t("table.reset"))+"\n                    ")]),e._v(" "),r("el-dropdown",{directives:[{name:"has-any-permission",rawName:"v-has-any-permission",value:["department:create","department:delete","department:export"],expression:"['department:create','department:delete','department:export']"}],staticClass:"filter-item",attrs:{trigger:"click"}},[r("el-button",[e._v("\n                            "+e._s(e.$t("table.more"))),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["department:create"],expression:"['department:create']"}],nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("table.add")))]),e._v(" "),r("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["department:delete"],expression:"['department:delete']"}],nativeOn:{click:function(t){return e.deleteDepartment(t)}}},[e._v(e._s(e.$t("table.delete")))]),e._v(" "),r("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["department:export"],expression:"['department:export']"}],nativeOn:{click:function(t){return e.exportExcel(t)}}},[e._v(e._s(e.$t("table.export")))])],1)],1)],1),e._v(" "),r("el-tree",{ref:"departmentTree",attrs:{props:e.treeProps,data:e.departmentTree,"check-strictly":!0,"show-checkbox":"",accordion:"","node-key":"id","highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.nodeClick}})],1)]),e._v(" "),r("el-col",{attrs:{xs:24,sm:12}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v(e._s(""===e.department.departmentId?this.$t("common.add"):this.$t("common.edit")))])]),e._v(" "),r("div",[r("el-form",{ref:"form",attrs:{model:e.department,rules:e.rules,"label-position":"right","label-width":"100px"}},[r("el-form-item",{attrs:{label:e.$t("table.department.parentId"),prop:"parentId"}},[r("tree-select",{staticStyle:{width:"100%"},attrs:{normalizer:e.treeSelectNormalizer,multiple:!1,options:e.departmentTree,"clear-value-text":e.$t("common.clear"),placeholder:" "},model:{value:e.department.parentId,callback:function(t){e.$set(e.department,"parentId",t)},expression:"department.parentId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("table.department.departmentName"),prop:"departmentName"}},[r("el-input",{model:{value:e.department.departmentName,callback:function(t){e.$set(e.department,"departmentName",t)},expression:"department.departmentName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("table.department.orderNum"),prop:"orderNum"}},[r("el-input-number",{attrs:{min:0,max:100},on:{change:e.handleNumChange},model:{value:e.department.orderNum,callback:function(t){e.$set(e.department,"orderNum",t)},expression:"department.orderNum"}})],1)],1)],1)]),e._v(" "),r("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"-2rem"}},[r("el-row",[r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[r("el-button",{attrs:{type:"primary",plain:"",loading:e.buttonLoading},on:{click:e.submit}},[e._v(e._s(""===e.department.departmentId?this.$t("common.add"):this.$t("common.edit"))+"\n                        ")])],1)],1)],1)],1)],1)],1)},a=[],i=(r("1c01"),r("58b2"),r("8e6e"),r("f3e2"),r("ac6a"),r("456d"),r("bd86")),s=(r("d25f"),r("57e7"),r("7f7f"),r("7026")),o=r.n(s);r("542c");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c={name:"DepartmentManager",components:{TreeSelect:o.a},data:function(){return{departmentName:"",buttonLoading:!1,departmentTree:[],department:this.initDepartment(),treeProps:{label:"name",children:"children"},treeSelectNormalizer:function(e){return(null==e.children||e.children.length<1)&&delete e.children,{label:e.name}},rules:{departmentName:[{required:!0,message:this.$t("rules.require"),trigger:"blur"},{min:3,max:10,message:this.$t("rules.range3to10"),trigger:"blur"}]}}},mounted:function(){this.initDepartmentTree()},methods:{initDepartment:function(){return{departmentId:"",departmentName:"",parentId:null,orderNum:0}},initDepartmentTree:function(){var e=this;this.$get("upms/department/tree").then((function(t){e.departmentTree=t.data}))},exportExcel:function(){},handleNumChange:function(e){this.department.orderNum=e},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},nodeClick:function(e){var t=e.data;this.department.parentId=e.parentId,"0"===this.department.parentId&&(this.department.parentId=null),this.department.orderNum=t.orderNum,this.department.departmentName=t.departmentName,this.department.departmentId=t.departmentId,this.$refs.form.clearValidate()},add:function(){this.resetForm()},deleteDepartment:function(){var e=this,t=this.$refs.departmentTree.getCheckedKeys();0===t.length?this.$message({message:this.$t("tips.noNodeSelected"),type:"warning"}):this.$confirm(this.$t("tips.confirmDeleteNode"),this.$t("common.tips"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then((function(){e.department.departmentIds=t.join(","),e.$delete("upms/department/delByIds/".concat(e.department.departmentIds)).then((function(){e.$message({message:e.$t("tips.deleteSuccess"),type:"success"}),e.reset()}))})).catch((function(){e.$refs.departmentTree.setCheckedKeys([])}))},search:function(){this.$refs.departmentTree.filter(this.departmentName)},reset:function(){this.initDepartmentTree(),this.departmentName="",this.resetForm()},submit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.buttonLoading=!0,e.department.createTime=e.department.modifyTime=null,e.department.departmentId?e.$put("upms/department/update",d({},e.department)).then((function(){e.buttonLoading=!1,e.$message({message:e.$t("tips.updateSuccess"),type:"success"}),e.reset()})).catch((function(){e.buttonLoading=!1})):e.$post("upms/department/create",d({},e.department)).then((function(){e.buttonLoading=!1,e.$message({message:e.$t("tips.createSuccess"),type:"success"}),e.reset()})).catch((function(){e.buttonLoading=!1}))}))},resetForm:function(){this.$refs.form.clearValidate(),this.$refs.form.resetFields(),this.department=this.initDepartment()}}},p=c,l=(r("5803"),r("9652"),r("0c7c")),u=Object(l["a"])(p,n,a,!1,null,"f86c97be",null);t["default"]=u.exports},9652:function(e,t,r){"use strict";var n=r("e8cc"),a=r.n(n);a.a},e8cc:function(e,t,r){}}]);