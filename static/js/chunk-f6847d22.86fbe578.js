(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6847d22"],{"27b5":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"app-container"},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v(t._s(t.dataForm.name))]),t._v(" "),e("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[t._v("打印")])],1),t._v(" "),e("div",{staticClass:"text item"},[e("el-row",t._l(t.charGraphList,function(t,a){return e("el-col",{key:a,attrs:{span:12}},[e("div",{style:{width:"100%",height:"300px"},attrs:{id:t.value+"_echarts"}})])}),1)],1)]),t._v(" "),e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("数据明细")]),t._v(" "),e("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[t._v("导出")])],1),t._v(" "),e("div",{staticClass:"text item"},[e("el-row",[e("el-col",[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{border:"",data:t.chartData,height:"300px"}},t._l(t.tableHead,function(a,r){return e("el-table-column",{key:r,attrs:{"header-align":"center",align:"center",label:a.fieldTxt,property:a.fieldName},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n                                "+t._s(a.row[a.column.property])+"\n                            ")]}}],null,!0)})}),1)],1)],1)],1)])],1)},i=[],n=e("3b7f"),o={dicts:["GRAPH_TYPE"],computed:{},data:function(){return{dataForm:{},tableData:[],tableHead:[],chartData:[],transformGraph:[],charGraphList:[],dataListLoading:!1,activeName:{name:"柱状图"}}},created:function(){this.getParams()},mounted:function(){},methods:{getParams:function(){var t=this.$route.query.id;this.getEChartsData(t),this.getDetailInfo(t)},getEChartsData:function(t){var a=this;this.dataListLoading=!0,Object(n["b"])(t).then(function(t){t?(a.dataForm=t.data.info,a.chartData=t.data.data,a.transform(a.dataForm.graphType)):a.$message.error(data.msg),a.dataListLoading=!1})},transform:function(t){var a=this.dict.GRAPH_TYPE;if(!a)return[];for(var e in this.transformGraph=a,t)for(var r in this.transformGraph)t[e]===this.transformGraph[r].value&&(this.charGraphList[e]=this.transformGraph[r]);this.drawLine()},drawLine:function(){var t=this;this.$nextTick(function(){var a=["#C33531","#EFE42A","#64BD3D","#EE9201","#29AAE3","#B74AE5","#0AAF9F","#E89589","#16A085","#4A235A","#C39BD3 ","#F9E79F","#BA4A00","#ECF0F1","#616A6B","#EAF2F8","#4A235A","#3498DB"],e=t.dataForm.xaxisField,r=t.dataForm.yaxisField,i=[],n=[];for(var o in t.chartData)i.push(t.chartData[o][e]),n.push(t.chartData[o][r[0]]);for(var s in t.charGraphList){var d=t.charGraphList[s],l=t.$echarts.init(document.getElementById(d.value+"_echarts")),c={title:{},grid:{left:"3%",right:"10%",bottom:"8%",containLabel:!0},legend:{data:[t.dataForm.yaxisText]},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#48b",width:2,type:"solid"}}},tooltip:{},xAxis:{data:i,axisTick:{show:!0,inside:!0,length:3,lineStyle:{color:"red",width:1,type:"solid"}}},yAxis:{},series:[{name:t.dataForm.yaxisText,type:d.value,data:n,itemStyle:{normal:{color:function(t){return a[t.dataIndex]}}}}]};"pie"===d.value&&(c={title:{},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},stillShowZeroSum:!1,series:[{name:t.dataForm.yaxisText,type:d.value,radius:"80%",center:["60%","60%"],data:t.chartData,itemStyle:{normal:{color:function(t){return a[t.dataIndex]}},emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(128, 128, 128, 0.5)"}}}]}),l.setOption(c)}})},getDetailInfo:function(t){var a=this;Object(n["b"])(t).then(function(t){t?a.tableHead=t.data:a.$message.error(t.msg)})}}},s=o,d=e("0c7c"),l=Object(d["a"])(s,r,i,!1,null,null,null);a["default"]=l.exports},"3b7f":function(t,a,e){"use strict";e.d(a,"d",function(){return s}),e.d(a,"c",function(){return l}),e.d(a,"b",function(){return c});var r=e("9bd2");function i(t){return r["a"].postData("support/report/graphReport/create",t)}function n(t){return r["a"].deleteData("support/report/graphReport/delete",t)}function o(t){return r["a"].putData("support/report/graphReport/update",t)}function s(t){return r["a"].postData("support/report/graphReport/parseSql",t)}function d(t,a){return r["a"].download("support/report/graphReport/export",t,a)}function l(t){return r["a"].get("support/report/graphReport/getGraphReport/".concat(t))}function c(t){return r["a"].get("support/report/graphReport/getChartsData/".concat(t))}a["a"]={add:i,edit:o,del:n,download:d}}}]);