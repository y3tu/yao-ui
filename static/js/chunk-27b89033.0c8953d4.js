(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27b89033"],{"0d6d":function(e,t,r){var a=r("d3f4"),o=r("67ab").onFreeze;r("5eda")("freeze",function(e){return function(t){return e&&a(t)?e(o(t)):t}})},"3b7f":function(e,t,r){"use strict";r.d(t,"d",function(){return l}),r.d(t,"c",function(){return d}),r.d(t,"b",function(){return c});var a=r("9bd2");function o(e){return a["a"].postData("support/report/graphReport/create",e)}function n(e){return a["a"].deleteData("support/report/graphReport/delete",e)}function i(e){return a["a"].putData("support/report/graphReport/update",e)}function l(e){return a["a"].postData("support/report/graphReport/parseSql",e)}function s(e,t){return a["a"].download("support/report/graphReport/export",e,t)}function d(e){return a["a"].get("support/report/graphReport/getGraphReport/".concat(e))}function c(e){return a["a"].get("support/report/graphReport/getChartsData/".concat(e))}t["a"]={add:o,edit:i,del:n,download:s}},"55dd":function(e,t,r){"use strict";var a=r("5ca1"),o=r("d8e8"),n=r("4bf8"),i=r("79e5"),l=[].sort,s=[1,2,3];a(a.P+a.F*(i(function(){s.sort(void 0)})||!i(function(){s.sort(null)})||!r("2f21")(l)),"Array",{sort:function(e){return void 0===e?l.call(n(this)):l.call(n(this),o(e))}})},7514:function(e,t,r){"use strict";var a=r("5ca1"),o=r("0a49")(5),n="find",i=!0;n in[]&&Array(1)[n](function(){i=!1}),a(a.P+a.F*i,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(n)},c6db:function(e,t,r){"use strict";r.d(t,"f",function(){return u}),r.d(t,"d",function(){return f}),r.d(t,"c",function(){return m}),r.d(t,"e",function(){return p}),r.d(t,"a",function(){return h});r("5df3"),r("4f7f"),r("0d6d"),r("20d6"),r("7514");var a=r("7618"),o=(r("55dd"),r("456d"),r("ac6a"),r("f3e2"),r("cebc")),n=r("ed08"),i=r("2b0e");function l(e){var t={tag:"default",idField:"id",title:"",url:"",data:[],selections:[],entity:{},params:{},form:{},defaultForm:function(){},sort:["id,desc"],time:50,crudMethod:{add:function(e){},del:function(e){},edit:function(e){},get:function(e){},download:function(e,t){}},optShow:{add:!0,edit:!0,del:!0,download:!0,reset:!0},props:{},queryOnPresenterCreated:!0,debug:!1};e=d(t,e);var r=Object(o["a"])({},e,{dataStatus:{},status:{add:l.STATUS.NORMAL,edit:l.STATUS.NORMAL,get cu(){if(this.add===l.STATUS.NORMAL&&this.edit===l.STATUS.NORMAL)return l.STATUS.NORMAL;if(this.add===l.STATUS.PREPARED||this.edit===l.STATUS.PREPARED)return l.STATUS.PREPARED;if(this.add===l.STATUS.PROCESSING||this.edit===l.STATUS.PROCESSING)return l.STATUS.PROCESSING;throw new Error("wrong crud's cu status")},get title(){return this.add>l.STATUS.NORMAL?"新增".concat(c.title):this.edit>l.STATUS.NORMAL?"编辑".concat(c.title):c.title}},msg:{submit:"提交成功",add:"新增成功",edit:"编辑成功",del:"删除成功"},page:{page:1,size:10,total:0},loading:!0,downloadLoading:!1,delAllLoading:!1}),n={submitSuccessNotify:function(){c.notify(c.msg.submit,l.NOTIFICATION_TYPE.SUCCESS)},addSuccessNotify:function(){c.notify(c.msg.add,l.NOTIFICATION_TYPE.SUCCESS)},editSuccessNotify:function(){c.notify(c.msg.edit,l.NOTIFICATION_TYPE.SUCCESS)},delSuccessNotify:function(){c.notify(c.msg.del,l.NOTIFICATION_TYPE.SUCCESS)},toQuery:function(){c.page.page=1,c.refresh()},refresh:function(){if(s(c,l.HOOK.beforeRefresh))return new Promise(function(e,t){c.loading=!0,c.vms[0].vm.$page(c.url,c.getQueryParams()).then(function(t){var r=c.getTable();r&&r.lazy&&(r.store.states.treeData={},r.store.states.lazyTreeNodeMap={});var a=t.data;c.page.total=a.total,c.data=a.records,c.resetDataStatus(),setTimeout(function(){c.loading=!1,s(c,l.HOOK.afterRefresh)},c.time),e(a)}).catch(function(e){c.loading=!1,t(e)})})},toAdd:function(){s(c,l.HOOK.beforeToAdd,c.form)&&s(c,l.HOOK.beforeToCU,c.form)&&(c.status.add=l.STATUS.PREPARED,s(c,l.HOOK.afterToAdd,c.form),s(c,l.HOOK.afterToCU,c.form))},toEdit:function(e){c.resetForm(JSON.parse(JSON.stringify(e))),s(c,l.HOOK.beforeToEdit,c.form)&&s(c,l.HOOK.beforeToCU,c.form)&&(c.status.edit=l.STATUS.PREPARED,c.getDataStatus(c.getDataId(e)).edit=l.STATUS.PREPARED,s(c,l.HOOK.afterToEdit,c.form),s(c,l.HOOK.afterToCU,c.form))},toDelete:function(e){c.getDataStatus(c.getDataId(e)).delete=l.STATUS.PREPARED},cancelDelete:function(e){s(c,l.HOOK.beforeDeleteCancel,e)&&(c.getDataStatus(c.getDataId(e)).delete=l.STATUS.NORMAL,s(c,l.HOOK.afterDeleteCancel,e))},cancelCU:function(){var e=c.status.add,t=c.status.edit;if(e===l.STATUS.PREPARED){if(!s(c,l.HOOK.beforeAddCancel,c.form))return;c.status.add=l.STATUS.NORMAL}if(t===l.STATUS.PREPARED){if(!s(c,l.HOOK.beforeEditCancel,c.form))return;c.status.edit=l.STATUS.NORMAL,c.getDataStatus(c.getDataId(c.form)).edit=l.STATUS.NORMAL}c.resetForm(),e===l.STATUS.PREPARED&&s(c,l.HOOK.afterAddCancel,c.form),t===l.STATUS.PREPARED&&s(c,l.HOOK.afterEditCancel,c.form),c.findVM("form").$refs["form"]&&c.findVM("form").$refs["form"].clearValidate()},submitCU:function(){s(c,l.HOOK.beforeValidateCU)&&c.findVM("form").$refs["form"].validate(function(e){e&&s(c,l.HOOK.afterValidateCU)&&(c.status.add===l.STATUS.PREPARED?c.doAdd():c.status.edit===l.STATUS.PREPARED&&c.doEdit())})},doAdd:function(){s(c,l.HOOK.beforeSubmit)&&(c.status.add=l.STATUS.PROCESSING,c.crudMethod.add(c.form).then(function(){c.status.add=l.STATUS.NORMAL,c.resetForm(),c.addSuccessNotify(),s(c,l.HOOK.afterSubmit),c.toQuery()}).catch(function(){c.status.add=l.STATUS.PREPARED,s(c,l.HOOK.afterAddError)}))},doEdit:function(){s(c,l.HOOK.beforeSubmit)&&(c.status.edit=l.STATUS.PROCESSING,c.crudMethod.edit(c.form).then(function(){c.status.edit=l.STATUS.NORMAL,c.getDataStatus(c.getDataId(c.form)).edit=l.STATUS.NORMAL,c.editSuccessNotify(),c.resetForm(),s(c,l.HOOK.afterSubmit),c.refresh()}).catch(function(){c.status.edit=l.STATUS.PREPARED,s(c,l.HOOK.afterEditError)}))},doDelete:function(e){var t,r=!1,a=[];if(e instanceof Array?(r=!0,e.forEach(function(e){a.push(c.getDataId(e))})):(a.push(c.getDataId(e)),t=c.getDataStatus(c.getDataId(e))),s(c,l.HOOK.beforeDelete,e))return r||(t.delete=l.STATUS.PROCESSING),c.crudMethod.del(a).then(function(){r?c.delAllLoading=!1:t.delete=l.STATUS.PREPARED,c.dleChangePage(1),c.delSuccessNotify(),s(c,l.HOOK.afterDelete,e),c.refresh()}).catch(function(){r?c.delAllLoading=!1:t.delete=l.STATUS.PREPARED})},doExport:function(){c.downloadLoading=!0,c.crudMethod.download(c.getQueryParams(),c.title+"数据.xlsx").then(function(e){c.downloadLoading=!1}).catch(function(){c.downloadLoading=!1})},getQueryParams:function(){return 0!==Object.keys(c.entity).length&&Object.keys(c.entity).forEach(function(e){null!==c.entity[e]&&""!==c.entity[e]||(c.entity[e]=void 0)}),0!==Object.keys(c.params).length&&Object.keys(c.params).forEach(function(e){null!==c.params[e]&&""!==c.params[e]||(c.params[e]=void 0)}),{current:c.page.page,size:c.page.size,sort:c.sort,entity:c.entity,params:c.params}},pageChangeHandler:function(e){c.page.page=e,c.refresh()},sizeChangeHandler:function(e){c.page.size=e,c.page.page=1,c.refresh()},dleChangePage:function(e){c.data.length===e&&1!==c.page.page&&(c.page.page-=1)},selectionChangeHandler:function(e){c.selections=e},resetQuery:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=JSON.parse(JSON.stringify(c.defaultEntity)),r=JSON.parse(JSON.stringify(c.defaultParams)),a=c.entity,o=c.params;Object.keys(a).forEach(function(e){a[e]=t[e]}),Object.keys(o).forEach(function(e){o[e]=r[e]}),e&&c.toQuery()},resetForm:function(e){var t=e||("object"===Object(a["a"])(c.defaultForm)?JSON.parse(JSON.stringify(c.defaultForm)):c.defaultForm()),r=c.form;for(var o in t)r.hasOwnProperty(o)?r[o]=t[o]:i["default"].set(r,o,t[o])},resetDataStatus:function(){var e={};function t(r){r.forEach(function(r){e[c.getDataId(r)]={delete:0,edit:0},r.children&&t(r.children)})}t(c.data),c.dataStatus=e},getDataStatus:function(e){return c.dataStatus[e]},selectChange:function(e,t){e.find(function(e){return c.getDataId(e)===c.getDataId(t)})?t.children&&t.children.forEach(function(t){c.getTable().toggleRowSelection(t,!0),e.push(t),t.children&&c.selectChange(e,t)}):c.toggleRowSelection(e,t)},toggleRowSelection:function(e,t){t.children&&t.children.forEach(function(t){c.getTable().toggleRowSelection(t,!1),t.children&&c.toggleRowSelection(e,t)})},findVM:function(e){return c.vms.find(function(t){return t&&t.type===e}).vm},notify:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.NOTIFICATION_TYPE.INFO;c.vms[0].vm.$notify({title:e,type:t,duration:2500})},updateProp:function(e,t){i["default"].set(c.props,e,t)},getDataId:function(e){return e[this.idField]},getTable:function(){return this.findVM("presenter").$refs.table},attchTable:function(){var e=this.getTable();this.updateProp("table",e);var t=this;e.$on("expand-change",function(r,a){if(a){var o=e.store.states.lazyTreeNodeMap,n=o[r.id];r.children=n,void 0!=n&&n.forEach(function(e){var r=c.getDataId(e);void 0===t.dataStatus[r]&&(t.dataStatus[r]={delete:0,edit:0})})}})}},c=Object.assign({},r);return i["default"].observable(c),Object.assign(c,n),Object.assign(c,{defaultEntity:JSON.parse(JSON.stringify(r.entity)),defaultParams:JSON.parse(JSON.stringify(r.params)),vms:Array(4),registerVM:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a={type:e,vm:t};r<0?this.vms.push(a):(this.vms.length=Math.max(this.vms.length,r),this.vms.splice(r,1,a))},unregisterVM:function(e){this.vms.splice(this.vms.findIndex(function(t){return t&&t.vm===e}),1)}}),Object.freeze(c),c}function s(e,t){e.debug&&console.log("callVmHook: "+t);for(var r=!0,a=[e],o=2;o<arguments.length;++o)a.push(arguments[o]);var n=new Set;return e.vms.forEach(function(e){return e&&n.add(e.vm)}),n.forEach(function(e){e[t]&&(r=!1!==e[t].apply(e,a)&&r)}),r}function d(e,t){var r=Object(o["a"])({},e);for(var a in e)t.hasOwnProperty(a)&&(r[a]=t[a]);return r}function c(e,t){if(t=t||e.$attrs["crud-tag"]||"default",e.$crud){var r=e.$crud[t];if(r)return r}return e.$parent?c(e.$parent,t):void 0}function u(e){return e&&console.warn("[CRUD warn]: please use $options.cruds() { return CRUD(...) or [CRUD(...), ...] }"),{data:function(){return{crud:this.crud}},beforeCreate:function(){var t=this;this.$crud=this.$crud||{};var r=this.$options.cruds instanceof Function?this.$options.cruds():e;r instanceof Array||(r=[r]),r.forEach(function(e){t.$crud[e.tag]&&console.error("[CRUD error]: crud with tag ["+e.tag+" is already exist"),t.$crud[e.tag]=e,e.registerVM("presenter",t,0)}),this.crud=this.$crud["defalut"]||r[0]},methods:{parseTime:function(e,t){return n["b"].date.parseTime(e,t)}},created:function(){for(var e in this.$crud)this.$crud[e].queryOnPresenterCreated&&this.$crud[e].toQuery()},destroyed:function(){for(var e in this.$crud)this.$crud[e].unregisterVM("presenter",this)},mounted:function(){void 0!==this.$refs.table&&this.crud.attchTable()}}}function f(){return{data:function(){return{crud:this.crud,query:this.crud.query}},beforeCreate:function(){this.crud=c(this),this.crud.registerVM("header",this,1)},destroyed:function(){this.crud.unregisterVM("header",this)}}}function p(){return{data:function(){return{crud:this.crud,page:this.crud.page}},beforeCreate:function(){this.crud=c(this),this.crud.registerVM("pagination",this,2)},destroyed:function(){this.crud.unregisterVM("pagination",this)}}}function m(e){return{data:function(){return{crud:this.crud,form:this.crud.form}},beforeCreate:function(){this.crud=c(this),this.crud.registerVM("form",this,3)},created:function(){this.crud.defaultForm=e,this.crud.resetForm()},destroyed:function(){this.crud.unregisterVM("form",this)}}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={type:void 0};return e=d(t,e),{data:function(){return{crud:this.crud}},beforeCreate:function(){this.crud=c(this),this.crud.registerVM(e.type,this)},destroyed:function(){this.crud.unregisterVM(e.type,this)}}}l.HOOK={beforeRefresh:"beforeCrudRefresh",afterRefresh:"afterCrudRefresh",beforeDelete:"beforeCrudDelete",afterDelete:"afterCrudDelete",beforeDeleteCancel:"beforeCrudDeleteCancel",afterDeleteCancel:"afterCrudDeleteCancel",beforeToAdd:"beforeCrudToAdd",afterToAdd:"afterCrudToAdd",beforeToEdit:"beforeCrudToEdit",afterToEdit:"afterCrudToEdit",beforeToCU:"beforeCrudToCU",afterToCU:"afterCrudToCU",beforeValidateCU:"beforeCrudValidateCU",afterValidateCU:"afterCrudValidateCU",beforeAddCancel:"beforeCrudAddCancel",afterAddCancel:"afterCrudAddCancel",beforeEditCancel:"beforeCrudEditCancel",afterEditCancel:"afterCrudEditCancel",beforeSubmit:"beforeCrudSubmitCU",afterSubmit:"afterCrudSubmitCU",afterAddError:"afterCrudAddError",afterEditError:"afterCrudEditError"},l.STATUS={NORMAL:0,PREPARED:1,PROCESSING:2},l.NOTIFICATION_TYPE={SUCCESS:"success",WARNING:"warning",INFO:"info",ERROR:"error"},t["b"]=l},d088:function(e,t,r){"use strict";r.r(t);var a,o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{"close-on-click-modal":!1,"append-to-body":!0,visible:e.crud.status.cu>0,title:e.crud.status.title,"before-close":e.crud.cancelCU,fullscreen:!0,width:"80%",top:"8vh"},on:{"update:visible":function(t){return e.$set(e.crud.status,"cu > 0",t)}}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"110px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.crud.submitCU(t)}}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[r("el-form-item",{attrs:{label:"图表名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"图表名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),r("el-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[r("el-form-item",{attrs:{label:"编码",prop:"code"}},[r("el-input",{attrs:{placeholder:"编码"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1),e._v(" "),r("el-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[r("el-form-item",{attrs:{label:"展示模板",prop:"displayTemplate"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择展示模板",clearable:""},model:{value:e.form.displayTemplate,callback:function(t){e.$set(e.form,"displayTemplate",t)},expression:"form.displayTemplate"}},[r("el-option",{key:"1",attrs:{label:"Tab风格",value:"tab"}}),e._v(" "),r("el-option",{key:"2",attrs:{label:"单排布局",value:"single"}}),e._v(" "),r("el-option",{key:"3",attrs:{label:"双排布局",value:"double"}})],1)],1)],1),e._v(" "),r("el-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[r("el-form-item",{attrs:{label:"X轴字段",prop:"xaxisField"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"X轴字段",clearable:""},model:{value:e.form.xaxisField,callback:function(t){e.$set(e.form,"xaxisField",t)},expression:"form.xaxisField"}},e._l(e.sqlColumns,function(e){return r("el-option",{key:e.columnName,attrs:{label:e.columnName,value:e.columnName}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[r("el-form-item",{attrs:{label:"Y轴字段",prop:"yaxisField"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"","allow-create":"",filterable:"","default-first-option":"",placeholder:"Y轴字段"},model:{value:e.form.yaxisField,callback:function(t){e.$set(e.form,"yaxisField",t)},expression:"form.yaxisField"}},e._l(e.sqlColumns,function(e){return r("el-option",{key:e.columnName,attrs:{label:e.columnName,value:e.columnName}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[r("el-form-item",{attrs:{label:"数据类型",prop:"dataType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择数据类型",clearable:""},model:{value:e.form.dataType,callback:function(t){e.$set(e.form,"dataType",t)},expression:"form.dataType"}},[r("el-option",{key:"1",attrs:{label:"SQL",value:"SQL"}}),e._v(" "),r("el-option",{key:"2",attrs:{label:"JSON",value:"JSON"}})],1)],1)],1),e._v(" "),"SQL"===e.crud.form.dataType?r("el-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[r("el-form-item",{attrs:{label:"数据源",prop:"dataType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"数据源",clearable:""},model:{value:e.form.dsId,callback:function(t){e.$set(e.form,"dsId",t)},expression:"form.dsId"}},e._l(e.dict.DATA_SOURCE,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.value}})}),1)],1)],1):e._e(),e._v(" "),r("el-col",{attrs:{xs:24,sm:12,md:16,lg:6}},[r("el-form-item",{attrs:{label:"图表类型",prop:"chartType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择图表类型",clearable:"",multiple:""},model:{value:e.form.graphType,callback:function(t){e.$set(e.form,"graphType",t)},expression:"form.graphType"}},[r("el-option",{key:"1",attrs:{label:"柱状图",value:"bar"}}),e._v(" "),r("el-option",{key:"2",attrs:{label:"曲线图",value:"line"}}),e._v(" "),r("el-option",{key:"3",attrs:{label:"饼图",value:"pie"}}),e._v(" "),r("el-option",{key:"4",attrs:{label:"数据列表",value:"table"}})],1)],1)],1),e._v(" "),r("el-col",{attrs:{xs:24,sm:24,md:24,lg:24}},[r("el-form-item",{attrs:{label:"描述",prop:"content"}},[r("el-input",{attrs:{placeholder:"描述"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1)],1),e._v(" "),"SQL"===e.form.dataType?r("el-col",{attrs:{xs:24,sm:24,md:24,lg:24}},[r("el-form-item",{attrs:{label:"查询SQL",prop:"cgrSql"}},[r("code-edit",{attrs:{height:"200",codeType:"text/x-mysql"},model:{value:e.form.cgrSql,callback:function(t){e.$set(e.form,"cgrSql",t)},expression:"form.cgrSql"}}),e._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-info"},on:{click:e.parseSql}},[e._v("解析SQL")])],1)],1):r("el-col",{attrs:{xs:24,sm:24,md:24,lg:24}},[r("el-form-item",{attrs:{label:"数据JSON",prop:"json"}},[r("code-edit",{attrs:{height:"200"},model:{value:e.form.json,callback:function(t){e.$set(e.form,"json",t)},expression:"form.json"}})],1)],1)],1)],1),e._v(" "),r("el-tabs",[r("el-tab-pane",{attrs:{label:"列表字段"}},[r("div",{staticClass:"button-row"},[r("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.add}},[e._v("新增")]),e._v(" "),r("el-button",{directives:[{name:"show",rawName:"v-show",value:e.dataListSelections.length>0,expression:"dataListSelections.length > 0"}],attrs:{size:"small",type:"primary",icon:"el-icon-minus"},on:{click:e.del}},[e._v("删除")])],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.form.graphReportItemList,border:"","row-class-name":e.tableRowClassName},on:{"selection-change":e.dataListSelectionChangeHandle}},[r("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{type:"index","header-align":"center",align:"center",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{prop:"fieldName","header-align":"center",align:"center",label:"字段名"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{size:"small",placeholder:"字段名"},model:{value:t.row.fieldName,callback:function(r){e.$set(t.row,"fieldName",r)},expression:"scope.row.fieldName"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"fieldTxt","header-align":"center",align:"center",label:"字段文本"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{size:"small",placeholder:"字段文本"},model:{value:t.row.fieldTxt,callback:function(r){e.$set(t.row,"fieldTxt",r)},expression:"scope.row.fieldTxt"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"orderNum","header-align":"center",align:"center",label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{size:"small",type:"number",placeholder:"排序"},model:{value:t.row.orderNum,callback:function(r){e.$set(t.row,"orderNum",r)},expression:"scope.row.orderNum"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"fieldType","header-align":"center",align:"center",label:"字段类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:t.row.fieldType,callback:function(r){e.$set(t.row,"fieldType",r)},expression:"scope.row.fieldType"}},[r("el-option",{key:"1",attrs:{label:"数值类型",value:"1"}}),e._v(" "),r("el-option",{key:"2",attrs:{label:"日期类型",value:"2"}}),e._v(" "),r("el-option",{key:"3",attrs:{label:"字符类型",value:"3"}}),e._v(" "),r("el-option",{key:"4",attrs:{label:"长整型",value:"4"}})],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"isShow","header-align":"center",align:"center",label:"是否显示"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-checkbox",{attrs:{"true-label":"Y","false-label":"N",size:"small"},model:{value:t.row.isShow,callback:function(r){e.$set(t.row,"isShow",r)},expression:"scope.row.isShow"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"isTotal","header-align":"center",align:"center",label:"计算总计"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-checkbox",{attrs:{"true-label":"Y","false-label":"N",size:"small"},model:{value:t.row.isTotal,callback:function(r){e.$set(t.row,"isTotal",r)},expression:"scope.row.isTotal"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"searchFlag","header-align":"center",align:"center",label:"是否查询"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-checkbox",{attrs:{"true-label":"Y","false-label":"N",size:"small"},model:{value:t.row.searchFlag,callback:function(r){e.$set(t.row,"searchFlag",r)},expression:"scope.row.searchFlag"}})]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"queryMode","header-align":"center",align:"center",label:"查询模式"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{attrs:{size:"small",placeholder:"请选择",clearable:""},model:{value:t.row.searchType,callback:function(r){e.$set(t.row,"searchType",r)},expression:"scope.row.searchType"}},[r("el-option",{key:"1",attrs:{label:"单条件查询",value:"1"}}),e._v(" "),r("el-option",{key:"2",attrs:{label:"范围查询",value:"2"}})],1)]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"dictCode","header-align":"center",align:"center",label:"字典Code"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{attrs:{size:"small",placeholder:"字典Code"},model:{value:t.row.dictCode,callback:function(r){e.$set(t.row,"dictCode",r)},expression:"scope.row.dictCode"}})]}}])})],1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.crud.cancelCU}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.crud.submitCU}},[e._v("确定")])],1)],1)},n=[],i=r("bd86"),l=(r("ac6a"),r("f3e2"),r("28a5"),r("3b7f")),s=r("720f"),d=r("c6db"),c={id:0,name:"",code:"",xaxisField:"",yaxisField:[],yaxisText:"yaxis_text",displayTemplate:"tab",dataType:"SQL",graphType:["bar"],content:"",cgrSql:"",json:"",dsId:"",graphReportItemList:[{fieldName:"",fieldTxt:"",orderNum:1,fieldType:"",isShow:"Y",isTotal:"N",searchFlag:"N",dictCode:""}]},u={components:{CodeEdit:s["a"]},mixins:[Object(d["c"])(c)],dicts:["DATA_SOURCE"],data:function(){return{dialog:!1,formLoading:!1,rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{required:!0,message:"请输入编码",trigger:"blur"}],xaxisField:[{required:!0,message:"请输入X轴字段",trigger:"blur"}],yaxisField:[{required:!0,message:"请输入Y轴字段",trigger:"blur"}],dsId:[{required:!0,message:"请选择数据源",trigger:"blur"}]},dataList:[{fieldName:"",fieldTxt:"",orderNum:1,fieldType:"",isShow:"Y",isTotal:"N",searchFlag:"N",dictCode:""}],sqlColumns:[],dataListLoading:!1,dataListSelections:[]}},created:function(){},methods:(a={},Object(i["a"])(a,d["b"].HOOK.beforeToEdit,function(e,t){var r=this;return t.yaxisField&&(t.yaxisField=t.yaxisField.split(",")),t.graphType&&(t.graphType=t.graphType.split(",")),t.id&&(this.formLoading=!0,Object(l["c"])(t.id).then(function(e){r.formLoading=!1,e?t.graphReportItemList=e.data.graphReportItemList:r.$message.error(e.msg)}).catch(function(e){r.formLoading=!1,console.log(e)})),!0}),Object(i["a"])(a,"parseSql",function(){var e=this;this.$isEmpty(this.form.dsId)?this.$notify({title:"请先选择数据源",type:"warning",duration:2500}):this.$isEmpty(this.form.cgrSql)?this.$notify({title:"请输入SQL语句",type:"warning",duration:2500}):Object(l["d"])({dsId:this.form.dsId,cgrSql:this.form.cgrSql}).then(function(t){var r=t.data;e.form.graphReportItemList.splice(0,e.form.graphReportItemList.length),r.forEach(function(t){e.sqlColumns.push(t),e.form.graphReportItemList.push({fieldName:t.columnName,fieldTxt:t.columnName,orderNum:1,fieldType:t.columnClassName,isShow:"Y",isTotal:"N",searchFlag:"N",dictCode:""})}),e.$notify({title:"解析完成!",type:"success",duration:2500})})}),Object(i["a"])(a,"add",function(){this.form.graphReportItemList.push({fieldName:"",fieldTxt:"",orderNum:1,fieldType:"",isShow:"Y",isTotal:"N",searchFlag:"N",dictCode:""})}),Object(i["a"])(a,"tableRowClassName",function(e,t){e.row.index=e.rowIndex}),Object(i["a"])(a,"dataListSelectionChangeHandle",function(e){this.dataListSelections=e}),Object(i["a"])(a,"del",function(){var e=this,t=this.dataListSelections;t&&t.forEach(function(t,r){e.form.graphReportItemList.forEach(function(r,a){t.index===r.index&&e.form.graphReportItemList.splice(a,1)})})}),a)},f=u,p=r("0c7c"),m=Object(p["a"])(f,o,n,!1,null,null,null);t["default"]=m.exports}}]);