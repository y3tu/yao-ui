(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54836384"],{"04f7":function(e,t,r){},"3e12":function(e,t,r){},"40b5":function(e,t,r){"use strict";var n=r("3e12"),a=r.n(n);a.a},a9c8:function(e,t,r){"use strict";var n=r("04f7"),a=r.n(n);a.a},bce6:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Department"},[r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{xs:24,sm:12}},[r("div",{staticClass:"app-container"},[r("div",{staticClass:"filter-container"},[r("el-input",{staticClass:"filter-item search-item",attrs:{placeholder:e.$t("table.department.departmentName")},model:{value:e.departmentName,callback:function(t){e.departmentName=t},expression:"departmentName"}}),e._v(" "),r("el-button",{staticClass:"filter-item",attrs:{type:"primary",plain:""},on:{click:e.search}},[e._v("\n                        "+e._s(e.$t("table.search"))+"\n                    ")]),e._v(" "),r("el-button",{staticClass:"filter-item",attrs:{type:"warning",plain:""},on:{click:e.reset}},[e._v("\n                        "+e._s(e.$t("table.reset"))+"\n                    ")]),e._v(" "),r("el-dropdown",{directives:[{name:"has-any-permission",rawName:"v-has-any-permission",value:["department:create","department:delete","department:export"],expression:"['department:create','department:delete','department:export']"}],staticClass:"filter-item",attrs:{trigger:"click"}},[r("el-button",[e._v("\n                            "+e._s(e.$t("table.more"))),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["department:create"],expression:"['department:create']"}],nativeOn:{click:function(t){return e.add(t)}}},[e._v(e._s(e.$t("table.add")))]),e._v(" "),r("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["department:delete"],expression:"['department:delete']"}],nativeOn:{click:function(t){return e.deleteDepartment(t)}}},[e._v(e._s(e.$t("table.delete")))]),e._v(" "),r("el-dropdown-item",{directives:[{name:"has-permission",rawName:"v-has-permission",value:["department:export"],expression:"['department:export']"}],nativeOn:{click:function(t){return e.exportExcel(t)}}},[e._v(e._s(e.$t("table.export")))])],1)],1)],1),e._v(" "),r("el-tree",{ref:"departmentTree",attrs:{props:e.treeProps,data:e.departmentTree,"check-strictly":!0,"show-checkbox":"",accordion:"","node-key":"id","highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.nodeClick}})],1)]),e._v(" "),r("el-col",{attrs:{xs:24,sm:12}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v(e._s(""===e.department.departmentId?this.$t("common.add"):this.$t("common.edit")))])]),e._v(" "),r("div",[r("el-form",{ref:"form",attrs:{model:e.department,rules:e.rules,"label-position":"right","label-width":"100px"}},[r("el-form-item",{attrs:{label:e.$t("table.department.parentId"),prop:"parentId"}},[r("tree-select",{staticStyle:{width:"100%"},attrs:{normalizer:e.treeSelectNormalizer,multiple:!1,options:e.departmentTree,"clear-value-text":e.$t("common.clear"),placeholder:" "},model:{value:e.department.parentId,callback:function(t){e.$set(e.department,"parentId",t)},expression:"department.parentId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("table.department.departmentName"),prop:"departmentName"}},[r("el-input",{model:{value:e.department.departmentName,callback:function(t){e.$set(e.department,"departmentName",t)},expression:"department.departmentName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.$t("table.department.orderNum"),prop:"orderNum"}},[r("el-input-number",{attrs:{min:0,max:100},on:{change:e.handleNumChange},model:{value:e.department.orderNum,callback:function(t){e.$set(e.department,"orderNum",t)},expression:"department.orderNum"}})],1)],1)],1)]),e._v(" "),r("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"-2rem"}},[r("el-row",[r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[r("el-button",{attrs:{type:"primary",plain:"",loading:e.buttonLoading},on:{click:e.submit}},[e._v(e._s(""===e.department.departmentId?this.$t("common.add"):this.$t("common.edit"))+"\n                        ")])],1)],1)],1)],1)],1)],1)},a=[],s=r("cebc"),i=(r("d25f"),r("57e7"),r("7f7f"),r("7026")),m=r.n(i),d=(r("542c"),{name:"DepartmentManager",components:{TreeSelect:m.a},data:function(){return{departmentName:"",buttonLoading:!1,departmentTree:[],department:this.initDepartment(),treeProps:{label:"name",children:"children"},treeSelectNormalizer:function(e){return(null==e.children||e.children.length<1)&&delete e.children,{label:e.name}},rules:{departmentName:[{required:!0,message:this.$t("rules.require"),trigger:"blur"},{min:3,max:10,message:this.$t("rules.range3to10"),trigger:"blur"}]}}},mounted:function(){this.initDepartmentTree()},methods:{initDepartment:function(){return{departmentId:"",departmentName:"",parentId:null,orderNum:0}},initDepartmentTree:function(){var e=this;this.$get("base/department/tree").then(function(t){e.departmentTree=t.data})},exportExcel:function(){},handleNumChange:function(e){this.department.orderNum=e},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},nodeClick:function(e){var t=e.data;this.department.parentId=e.parentId,"0"===this.department.parentId&&(this.department.parentId=null),this.department.orderNum=t.orderNum,this.department.departmentName=t.departmentName,this.department.departmentId=t.departmentId,this.$refs.form.clearValidate()},add:function(){this.resetForm()},deleteDepartment:function(){var e=this,t=this.$refs.departmentTree.getCheckedKeys();0===t.length?this.$message({message:this.$t("tips.noNodeSelected"),type:"warning"}):this.$confirm(this.$t("tips.confirmDeleteNode"),this.$t("common.tips"),{confirmButtonText:this.$t("common.confirm"),cancelButtonText:this.$t("common.cancel"),type:"warning"}).then(function(){e.department.departmentIds=t.join(","),e.$delete("base/department/delByIds/".concat(e.department.departmentIds)).then(function(){e.$message({message:e.$t("tips.deleteSuccess"),type:"success"}),e.reset()})}).catch(function(){e.$refs.departmentTree.setCheckedKeys([])})},search:function(){this.$refs.departmentTree.filter(this.departmentName)},reset:function(){this.initDepartmentTree(),this.departmentName="",this.resetForm()},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.buttonLoading=!0,e.department.createTime=e.department.modifyTime=null,e.department.departmentId?e.$put("base/department/update",Object(s["a"])({},e.department)).then(function(){e.buttonLoading=!1,e.$message({message:e.$t("tips.updateSuccess"),type:"success"}),e.reset()}).catch(function(){e.buttonLoading=!1}):e.$post("base/department/create",Object(s["a"])({},e.department)).then(function(){e.buttonLoading=!1,e.$message({message:e.$t("tips.createSuccess"),type:"success"}),e.reset()}).catch(function(){e.buttonLoading=!1})})},resetForm:function(){this.$refs.form.clearValidate(),this.$refs.form.resetFields(),this.department=this.initDepartment()}}}),o=d,c=(r("a9c8"),r("40b5"),r("0c7c")),l=Object(c["a"])(o,n,a,!1,null,"6b35b841",null);t["default"]=l.exports}}]);