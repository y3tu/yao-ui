(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b326c"],{"26c5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"head-container"},[a("label",{staticClass:"el-form-item-label"},[e._v("缓存名称")]),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请输入缓存名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.cacheName,callback:function(t){e.cacheName=t},expression:"cacheName"}}),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"success",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{size:"mini",type:"warning",icon:"el-icon-reset"},on:{click:e.resetCacheStats}},[e._v("重置缓存统计数据")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticStyle:{width:"100%"},attrs:{border:"",stripe:"",fit:"","highlight-current-row":"",fixed:"",data:e.tableData,size:"small"}},[a("el-table-column",{attrs:{label:"序号",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"cacheName",label:"缓存名"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"internalKey",label:"内部缓存名",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"center",prop:"depict",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"requestCount",align:"center",label:"请求总数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"missCount",align:"center",label:"未命中总数",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"hitRate",align:"center",label:"命中率"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstCacheRequestCount",align:"center",label:"一级缓存命中总数",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstCacheMissCount",align:"center",label:"一级缓存未命中总数",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"secondCacheRequestCount",align:"center",label:"级缓存命中总数",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"secondCacheMissCount",align:"center",label:"二级缓存未命中总数",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalLoadTime",align:"center",label:"总的请求时间",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{slot:"right",size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.deleteCache(t.row)}},slot:"right"},[e._v("\n                    清除缓存\n                ")])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"8px"},attrs:{total:e.total,layout:"total, prev, pager, next, sizes","current-page":e.currentPage,"page-size":e.pageSize},on:{"size-change":e.sizeChange,"current-change":e.pageChange}})],1)},l=[],i=(a("386d"),a("6762"),a("2fdb"),a("d25f"),a("9bd2"));function c(){return i["a"].get("base/yao-cache/cache-stats/list")}function r(e){return i["a"].get("base/yao-cache/cache-stats/delete-cache",e)}function o(){return i["a"].get("base/yao-cache/cache-stats/reset-stats")}var s={name:"cacheManager",data:function(){return{cacheName:"",tableData:[],pageLoading:!1,currentPage:1,total:20,pageSize:10}},created:function(){var e=this;this.$nextTick(function(){e.init()})},methods:{init:function(){},search:function(){var e=this;this.pageLoading=!0,c().then(function(t){e.tableData=t.data;var a=e.tableData.filter(function(t,a){return t.cacheName.includes(e.cacheName)});e.list=a.filter(function(t,a){return a<e.currentPage*e.pageSize&&a>=e.pageSize*(e.currentPage-1)}),e.total=a.length,e.tableData=e.list,e.pageLoading=!1}).catch(function(t){e.pageLoading=!1})},deleteCache:function(e){var t=this;r({cacheName:e.cacheName,internalKey:e.internalKey}).then(function(e){t.$notify({title:"删除缓存成功",type:"success",duration:6e3})})},resetCacheStats:function(){var e=this;o().then(function(t){e.$notify({title:"重置缓存统计数据",type:"success",duration:6e3})})},sizeChange:function(e){this.currentPage=1,this.pageSize=e,this.search()},pageChange:function(e){this.currentPage=e,this.search()},handleSelect:function(e){}}},u=s,h=a("0c7c"),p=Object(h["a"])(u,n,l,!1,null,null,null);t["default"]=p.exports}}]);